<!DOCTYPE html>
<html>

<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Gift Sift - Get Your Gift On</title>
        
        <!-- Stylesheets -->
        <link rel="stylesheet" href="css/mobile.css" />
        <link rel="stylesheet" href="css/style.css" />
        
        <!-- Javascript -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script src="js/mobile.js"></script>
    </head>
    <body>
        <!-- Home -->
         
            <div data-role="page" id="main">            
             <div class="wrapper">   
                <div id="header">
                    <img src="images/logo.png" />
                </div>
            
                <div id="blurb">
                    <p>
                        Stuck for present ideas? Use the gift sifter!
                    </p>
                    <a id="santa"></a>
                </div>
                    <div data-role="content">
                        <div data-role="fieldcontain">
                            <fieldset data-role="controlgroup">
                                <label for="labelSliderBudget">
                                    What's your budget: £
                                </label>
                                <input id="sliderBudget" type="range" name="slider" value="50" min="0" max="100" data-highlight="false" />
                            </fieldset>
                        </div>
                        <div data-role="fieldcontain">
                            <fieldset data-role="controlgroup">
                                <label for="labelSliderAge">
                                    Recipients Age:
                                </label>
                                <input id="sliderAge" type="range" name="slider" value="50" min="0" max="80" data-highlight="false" />
                            </fieldset>
                        </div>
                        <div id="male" data-role="fieldcontain">
                            <fieldset data-role="controlgroup" data-type="horizontal">
                                <legend>
                                    Who is it for?
                                </legend>
                                <input id="radioMale" name="radioGender" value="male" type="radio" checked="yes" />
                                <label for="radioMale">Male</label>
                                <input id="radioFemale" name="radioGender" value="female" type="radio" />
                                <label for="radioFemale">Female</label>
                            </fieldset>
                        </div>
                        <input id="submit" class="css3button" type="submit" value="Sift!" />
                        <div id="result"></div>
                    </div>
                </div>       
            </div>
        
        <!-- SCRIPTS -->
        
        <!-- OLD SCOLD BELOW . FORGET IT . WE NEED TO IMPLEMENT THE AMAZON LOOKUPITEM -->     
        <!-- PASS THE VALUES OF THE SLIDER FOR THE AGE , PRICE INSIDE THE QUERY ON THE CLICK FUNCTION -->
        <script src="js/sifter.js"></script>
        <script>
            $(function() {                
                $('#submit').click(function(){
                	
                	
                    
                    var budget = $('#sliderBudget').val();
                    var age = $('#sliderBudget').val();
                    var gender = $('input[name=radioGender]:checked').val();

                    var res = getGift(budget, age, gender);
                    
                    if (!res) {
                        alert("Sorry, you're just too picky!");
                    } else {
                        var $giftLink = $('<a href="'+res['google-url']+'" target="_blank">');
                        $giftLink.append('<h2>Your Gift Sift!!</h2>');
                        $giftLink.append('<img src="'+res['image']+'" />');
                        $giftLink.append('<h3>'+res['title']+'</h3>');
                        $giftLink.append('<p class="price">£'+(res['price']*1).toFixed(2)+'</p>');
                        
                        $('#result').html($giftLink);
                        $('#result').append('<button id="close" class="css3button">Re-Sift</button>');
                        $('#result').animate({'left':0}, 'slow');
                    }
                    
                });
                
                $('#close').live('click', function(){
                    $('#result').fadeOut(500, function() {
                        $('#result').css('left', '320px').fadeIn()
                    });
                });
                
                $('#santa').click(function(){
                    var res = secretSanta();
                    
                    if (!res) {
                        alert("Sorry, you're just too picky!");
                    } else {
                        var $giftLink = $('<a href="'+res['google-url']+'" target="_blank">');
                        $giftLink.append('<h2>Your Secret Santa!!</h2>');
                        $giftLink.append('<img src="'+res['image']+'" />');
                        $giftLink.append('<h3>'+res['title']+'</h3>');
                        $giftLink.append('<p class="price">£'+(res['price']*1).toFixed(2)+'</p>');
                        
                        $('#result').html($giftLink);
                        $('#result').append('<button id="close" class="css3button">Re-Sift</button>');
                        $('#result').animate({'left':0}, 'slow');
                    }                    
                });
                
            });
        </script>
    </body>
</html>