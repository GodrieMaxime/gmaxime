<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui,  user-scalable=0;">
	<meta charset="UTF-8">
	<title>TapMinute</title>

	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/font-awesome.css">
	<link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/three.css">
</head>
<body>
	<div class="main-wrapper box">
	    <div class="instructions-wrapper">
	      <div class="instructions-inner-wrapper " >
	           <a href="#" class="jq-close-button close-button"><i class="fa fa-times"></i></a>
	           <h1>Instructions</h1>
	           
	       </div>
	    </div>
	    <div class="game-over jq-game-over">
	        <h1>Game Over</h1>
	    </div>
	    <div class="main-wrapper-inner" data-xthreshold="0" id="main-wrapper-inner">
            <div class="jq-wheel wheel">
     <div class="gear-large jq-gear-large jq-main-gear">
            <div class="inner-gear shade-one">
                <div class="left-top corner"></div>
                <div class="right-top corner"></div>
                <div class="right-bottom corner"></div>
                <div class="left-bottom corner"></div>
            </div>
            <div class="inner-gear shade-three">
            </div>
            <div class="inner-gear shade-two">
            </div>
            <div class="inner-gear shade-four">
            </div>
        </div>
         <div class="gear jq-gear jq-main-gear">
            <div class="inner-gear shade-three">
            </div>
            <div class="inner-gear shade-four">
            </div>
            <div class="inner-gear shade-two">
            </div>
            <div class="inner-gear shade-one">
                <div class="left-top corner"></div>
                <div class="right-top corner"></div>
                <div class="right-bottom corner"></div>
                <div class="left-bottom corner"></div>
            </div>
        </div>
        
        <div class="gear-small jq-gear-small jq-main-gear">
            <div class="inner-gear shade-three">
            </div>
            <div class="inner-gear shade-four">
            </div>
            <div class="inner-gear shade-one">
                <div class="left-top corner"></div>
                <div class="right-top corner"></div>
                <div class="right-bottom corner"></div>
                <div class="left-bottom corner"></div>
            </div>
            <div class="inner-gear shade-two">
            </div>
        </div>
</div>

<div id="result"></div><br>
<div id="speed"></div>
<div id="variables"></div>

        </div>
         <div class="bottom-wrapper">
            <a href="#" class="jq-play-button play-button"><i class="fa fa-retweet fa-spin"></i></a>
            <a href="#" class="jq-instructions-button instructions-button"><i class="fa fa-question-circle"></i></a>
    		<div class="jq-score-wrapper score-wrapper">
    		    <div class="actual-score">
               		<span>Score</span>
               		<span class="actual-score-span jq-actual-score"></span>
               	</div>
           		<div class="best-score">
               		<span >Best</span>
               		<span class="best-score-span jq-best-score"></span>
           		</div>
    		</div>
    	</div>
	</div>
		<script type="text/javascript" src="//code.jquery.com/jquery-git.js"></script>
		<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
	
		

</body>
</html>
<script>
var timer=30;
var to;
var timeClicked = 0;
var gearsArray = ['.gear-small', '.gear', '.gear-large'];


function isUndefined(a) {
    return a === undefined;
}

/**
 * Helper function to determine whether there is an intersection between the two polygons described
 * by the lists of vertices. Uses the Separating Axis Theorem
 *
 * @param a an array of connected points [{x:, y:}, {x:, y:},...] that form a closed polygon
 * @param b an array of connected points [{x:, y:}, {x:, y:},...] that form a closed polygon
 * @return true if there is any intersection between the 2 polygons, false otherwise
 */
function doPolygonsIntersect(a, b) {
    var polygons = [a, b];
    var minA, maxA, projected, i, i1, j, minB, maxB;

    for (i = 0; i < polygons.length; i++) {

        // for each polygon, look at each edge of the polygon, and determine if it separates
        // the two shapes
        var polygon = polygons[i];
        for (i1 = 0; i1 < polygon.length; i1++) {

            // grab 2 vertices to create an edge
            var i2 = (i1 + 1) % polygon.length;
            var p1 = polygon[i1];
            var p2 = polygon[i2];

            // find the line perpendicular to this edge
            var normal = { x: p2.y - p1.y, y: p1.x - p2.x };

            minA = maxA = undefined;
            // for each vertex in the first shape, project it onto the line perpendicular to the edge
            // and keep track of the min and max of these values
            for (j = 0; j < a.length; j++) {
                projected = normal.x * a[j].x + normal.y * a[j].y;
                if (isUndefined(minA) || projected < minA) {
                    minA = projected;
                }
                if (isUndefined(maxA) || projected > maxA) {
                    maxA = projected;
                }
            }

            // for each vertex in the second shape, project it onto the line perpendicular to the edge
            // and keep track of the min and max of these values
            minB = maxB = undefined;
            for (j = 0; j < b.length; j++) {
                projected = normal.x * b[j].x + normal.y * b[j].y;
                if (isUndefined(minB) || projected < minB) {
                    minB = projected;
                }
                if (isUndefined(maxB) || projected > maxB) {
                    maxB = projected;
                }
            }

            // if there is no overlap between the projects, the edge we are looking at separates the two
            // polygons, and we know there is no overlap
            if (maxA < minB || maxB < minA) {
                console.log("polygons don't intersect!");
      
                stopGame();
                return false;
            }
        }
    }
    console.log('colision');
    return true;
};

function collision($div1, $div2) {
    var pointsa = new Array(4), pointsb = new Array(4);

    $div1.find('.corner').each(function(i) {
        pointsa[i] = {x: parseInt($(this).offset().left), y: parseInt($(this).offset().top)};
    });
    
    $div2.find('.corner').each(function(i) {
        pointsb[i] = {x: parseInt($(this).offset().left), y: parseInt($(this).offset().top)};
    });
     
    return doPolygonsIntersect(pointsb, pointsa);
}

$( document ).ready(function() {
    stopGame();
    $('.jq-play-button').show();
});

function startGame() {
     $('.jq-main-gear').removeClass('paused');
      timeClicked = 0;
      $('#speed').html(timeClicked);
}

function stopGame() {
    $('.jq-main-gear').addClass('paused');
    /*$('.jq-main-gear').css('-webkit-animation-duration', '6s');*/
     timeClicked = 0;
     $('#speed').html(timeClicked);
}

function setSpeed() {
   var randomItemGearsArray = gearsArray[Math.floor(Math.random()*gearsArray.length)];
   var speed = $(randomItemGearsArray).css('-webkit-animation-duration');
   speed = parseInt(speed);
   
    if(speed > 1) {
        speed = speed - 1 ;
    }
    
    $('#speed').text(speed);
    $(randomItemGearsArray).css('-webkit-animation-duration', speed + 's');
}

$( '.jq-wheel' ).click(function() {
    timeClicked ++;
     if (timeClicked == 1)
     {
         $('#speed').html(timeClicked);
         $('.gear-large').addClass('paused');
     }
     else if (timeClicked == 2) {
          $('#speed').html(timeClicked);
        $('.gear').addClass('paused');
         collision($('.gear-large .inner-gear.shade-one'),$('.gear .inner-gear.shade-one'));
     }
     
     else if (timeClicked == 3) {
         $('#speed').html(timeClicked);
         $('.jq-main-gear').removeClass('paused');
         collision($('.gear .inner-gear.shade-one'),$('.gear-small .inner-gear.shade-one')); 
         timeClicked = 0;
     }
});

$( '.jq-play-button' ).click(function() {
     $('#speed').html(timeClicked);
    startGame();
});

</script>
<!-- VARIABLE TT THE BEGINNIGN TO CHOOSE WHICH COLOR YOU WANT TO MATCH -->

